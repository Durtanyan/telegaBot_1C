# Описание.

Бот предназначен для получения отчетов о прохождении тестов в сервисе Allure Docker Service UI.
Отчеты получаются по api сервиса. По запросу получается html страница с репортом в формате allure,
полученная страница парсится и с нее отбираются данные о тестах. Пройденных, сломанных или упавших.
На основании этих данных собирается текстовая строка и отправляется пользователю в телеграм.

## Общие команды.

/start - команда по которой пользователь добавляется в базу данных бота. Данные пользователей
заносятся с помощью модуля shelve в формате: ключ=username пользователя, значение ключа представляет собой список => [chat_id, [], False],
первым элементом которого является chat_id пользователя, по которому точно позиционируется рассылка
отчетов о прохождении тестов и прочих сообщениях, вторым элементом списка является вложенный список,
в котором собраны номера отчетов на которые подписался пользователь, третий элемент - право пользователя БД. По умолчанию отсутствует.
Выдается администатором бота по команде каждому пользователю индивидуально. Так же при регистрации выводится инструкция
пользователю.

/help - команда, которая выводит инструкцию по пользованию ботом по требованию.

Доступные для подписки отчеты - Команда, которая выводит список доступных к подписке отчетов.
Пользователь может ввести номера необходимых отчетов и отправить сообщение боту. Номера отчетов запишутся в БД.
Каждый раз при отправке сообщения список отчетов очищается и записывается снова. Если пользователь введет номера
отчетов, которые отсутствуют в списке выбора, или невалидные данные - бот откажет в записи и оповестит об этом.
Валидными данными являются номера отчетов из списка доступных, введенные через пробел.

Получить отчеты по подписке - Пользовательполучает отчеты сразу.

Отписаться от получения отчетов - Список отчетов обнуляется. Пользователь отсается в БД.

## Команды администратора.

/get_report_for_admin - по команде "Старт" бот регистрирует всех пользователей. Но не дает разрешения на выполнение всех остальных команд.
Эта команда выводит отчет по всем зарегистрированным пользователям. Администратор может принять решение на выдачу разрешения или удаление пользователя из БД.

/add_view [username] - администратор добавляет пользователю права на работу с БД. Разрешается подписка на отчеты, просмотр доступных к подписке отчетов...
Имя пользователя добавляется через пробел, команда выполняется для каждого пользователя отдельно. Список не обрабатывается.

/delete_view [username] - администратор удаляет пользователю права на работу с БД. Все команды перестают работать.
Имя пользователя добавляется через пробел, команда выполняется для каждого пользователя отдельно. Список не обрабатывается.

# Используемые технологии.

Язык программирования Python 3.10.11

Используемые библиотеки в файле requirements.txt

База данных - модуль shelve.
